<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ç§»ä½ã•ãŒã—</title>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;500;700&display=swap" rel="stylesheet">
<style>
* { margin:0; padding:0; box-sizing:border-box; }
body { font-family:'Noto Sans JP',sans-serif; background:#f4f1eb; height:100vh; display:flex; flex-direction:column; overflow:hidden; }

header {
  background:#fff; border-bottom:1px solid #e0dbd2;
  display:flex; align-items:center; gap:12px;
  padding:0 16px; height:52px; flex-shrink:0;
  box-shadow:0 1px 6px rgba(0,0,0,0.06);
}
.logo { font-size:18px; font-weight:700; color:#3a6b4a; letter-spacing:1px; white-space:nowrap; }
.logo span { color:#e07b39; }
.search-bar {
  flex:1; background:#f4f1eb; border-radius:8px;
  display:flex; align-items:center; padding:7px 12px; gap:6px;
}
.search-bar input { border:none; background:transparent; font-family:inherit; font-size:13px; outline:none; width:100%; }

.filter-bar {
  background:#fff; border-bottom:1px solid #e8e4dc;
  padding:10px 12px; display:flex; gap:6px; overflow-x:auto; flex-shrink:0;
}
.filter-bar::-webkit-scrollbar { display:none; }
.chip {
  padding:6px 14px; border-radius:50px; font-size:12px; white-space:nowrap;
  border:1.5px solid #ddd; background:white; color:#666;
  cursor:pointer; font-family:inherit; flex-shrink:0;
}
.chip.active-green { border-color:#3a6b4a; background:#3a6b4a; color:white; font-weight:700; }
.chip.active-orange { border-color:#e07b39; background:#e07b39; color:white; font-weight:700; }

.main { display:flex; flex:1; overflow:hidden; }

/* MAP */
.map-wrap { flex:1; position:relative; }
#map-iframe {
  width:100%; height:100%; border:none;
}

/* PANEL */
.panel {
  width:280px; background:#fff; border-left:1px solid #e0dbd2;
  display:flex; flex-direction:column; overflow:hidden;
}
.panel-count {
  padding:12px 14px 8px; font-size:12px; color:#888; border-bottom:1px solid #f0ede6; flex-shrink:0;
}
.panel-count strong { color:#3a6b4a; font-size:16px; }
.panel-list { flex:1; overflow-y:auto; }
.panel-list::-webkit-scrollbar { width:3px; }
.panel-list::-webkit-scrollbar-thumb { background:#ddd; border-radius:3px; }

.pitem {
  display:flex; gap:10px; padding:12px 14px;
  border-bottom:1px solid #f4f1eb; cursor:pointer; transition:background 0.15s;
}
.pitem:hover { background:#f9f7f4; }
.pitem-emoji {
  width:48px; height:44px; border-radius:8px; flex-shrink:0;
  display:flex; align-items:center; justify-content:center; font-size:22px;
}
.pitem-info { flex:1; min-width:0; }
.pitem-name { font-size:12px; font-weight:700; color:#222; line-height:1.3; margin-bottom:2px; }
.pitem-loc { font-size:10px; color:#999; margin-bottom:4px; }
.pitem-tags { display:flex; gap:3px; flex-wrap:wrap; }
.ptag { font-size:9px; padding:2px 6px; border-radius:3px; background:#f4f1eb; color:#777; }

/* mobile: panel becomes bottom sheet */
@media (max-width: 600px) {
  .panel { width:100%; height:220px; border-left:none; border-top:1px solid #e0dbd2; }
  .main { flex-direction:column; }
}
</style>
</head>
<body>

<header>
  <div class="logo">ç§»ä½<span>ã•ãŒã—</span></div>
  <div class="search-bar">
    <span style="color:#bbb;font-size:13px">ğŸ”</span>
    <input type="text" id="search" placeholder="åœ°åãƒ»æ–½è¨­åã§æ¤œç´¢...">
  </div>
</header>

<div class="filter-bar">
  <button class="chip active-green" data-type="all">ã™ã¹ã¦</button>
  <button class="chip" data-type="trial">ãŠè©¦ã—ç§»ä½</button>
  <button class="chip" data-type="dual">äºŒæ‹ ç‚¹æ–½è¨­</button>
  <button class="chip" data-type="share">ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹</button>
  <div style="width:1px;background:#e8e4dc;margin:0 4px;flex-shrink:0"></div>
  <button class="chip active-orange" data-area="all">å…¨å›½</button>
  <button class="chip" data-area="hokkaido">åŒ—æµ·é“</button>
  <button class="chip" data-area="tohoku">æ±åŒ—</button>
  <button class="chip" data-area="kanto">é–¢æ±</button>
  <button class="chip" data-area="chubu">ä¸­éƒ¨</button>
  <button class="chip" data-area="kinki">è¿‘ç•¿</button>
  <button class="chip" data-area="chugoku">ä¸­å›½</button>
  <button class="chip" data-area="shikoku">å››å›½</button>
  <button class="chip" data-area="kyushu">ä¹å·</button>
</div>

<div class="main">
  <div class="map-wrap">
    <iframe id="map-iframe"
      src="https://www.openstreetmap.org/export/embed.html?bbox=128.0%2C30.0%2C146.0%2C45.0&layer=mapnik"
      allowfullscreen>
    </iframe>
  </div>

  <div class="panel">
    <div class="panel-count"><strong id="count">15</strong> ä»¶è¡¨ç¤ºä¸­</div>
    <div class="panel-list" id="panel-list"></div>
  </div>
</div>

<script>
const facilities = [
  { id:1, name:"åŒ—æµ·é“ãƒ‹ã‚»ã‚³ ãŠè©¦ã—ä½å®…", area:"hokkaido", areaName:"åŒ—æµ·é“", type:"trial", emoji:"ğŸ”ï¸", location:"åŒ—æµ·é“è™»ç”°éƒ¡ãƒ‹ã‚»ã‚³ç”º", tags:["ãŠè©¦ã—ç§»ä½","ãƒšãƒƒãƒˆå¯","æ¸©æ³‰åœ°"], lat:42.804, lng:140.687 },
  { id:2, name:"å‡½é¤¨ äºŒæ‹ ç‚¹ãƒ™ãƒ¼ã‚¹", area:"hokkaido", areaName:"åŒ—æµ·é“", type:"dual", emoji:"ğŸ¦‘", location:"åŒ—æµ·é“å‡½é¤¨å¸‚", tags:["äºŒæ‹ ç‚¹","æµ·ãŒè¦‹ãˆã‚‹"], lat:41.773, lng:140.726 },
  { id:3, name:"å¼˜å‰ ã‚Šã‚“ã”ã®å®¶", area:"tohoku", areaName:"æ±åŒ—", type:"share", emoji:"ğŸ", location:"é’æ£®çœŒå¼˜å‰å¸‚", tags:["ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹","è£œåŠ©é‡‘ã‚ã‚Š"], lat:40.602, lng:140.464 },
  { id:4, name:"ä»™å° ã‚µãƒ†ãƒ©ã‚¤ãƒˆã‚ªãƒ•ã‚£ã‚¹ä»˜ã", area:"tohoku", areaName:"æ±åŒ—", type:"dual", emoji:"ğŸ™ï¸", location:"å®®åŸçœŒä»™å°å¸‚", tags:["äºŒæ‹ ç‚¹","ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ä»˜"], lat:38.269, lng:140.869 },
  { id:5, name:"é‚£é ˆé«˜åŸ æ£®ã®ã‚·ã‚§ã‚¢", area:"kanto", areaName:"é–¢æ±", type:"share", emoji:"ğŸŒ²", location:"æ ƒæœ¨çœŒé‚£é ˆç”º", tags:["ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹","ãƒšãƒƒãƒˆå¯"], lat:37.066, lng:140.047 },
  { id:6, name:"è‘‰å±± ãŠè©¦ã—æš®ã‚‰ã—", area:"kanto", areaName:"é–¢æ±", type:"trial", emoji:"ğŸŒŠ", location:"ç¥å¥ˆå·çœŒè‘‰å±±ç”º", tags:["ãŠè©¦ã—ç§»ä½","æµ·ãŒè¦‹ãˆã‚‹"], lat:35.273, lng:139.576 },
  { id:7, name:"è»½äº•æ²¢ ãƒ¯ãƒ¼ã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹", area:"kanto", areaName:"é–¢æ±", type:"dual", emoji:"ğŸ•ï¸", location:"é•·é‡çœŒè»½äº•æ²¢ç”º", tags:["äºŒæ‹ ç‚¹","ã‚³ãƒ¯ãƒ¼ã‚­ãƒ³ã‚°ä»˜"], lat:36.348, lng:138.600 },
  { id:8, name:"ç™½å·éƒ· å¤æ°‘å®¶ã‚¹ãƒ†ã‚¤", area:"chubu", areaName:"ä¸­éƒ¨", type:"trial", emoji:"ğŸ¡", location:"å²é˜œçœŒç™½å·æ‘", tags:["ãŠè©¦ã—ç§»ä½","è£œåŠ©é‡‘ã‚ã‚Š"], lat:36.254, lng:136.906 },
  { id:9, name:"å—ä¼Šè±† æµ·è¾ºã®äºŒæ‹ ç‚¹", area:"chubu", areaName:"ä¸­éƒ¨", type:"dual", emoji:"ğŸ ", location:"é™å²¡çœŒå—ä¼Šè±†ç”º", tags:["äºŒæ‹ ç‚¹","æµ·ãŒè¦‹ãˆã‚‹"], lat:34.620, lng:138.797 },
  { id:10, name:"äº¬éƒ½è¥¿é™£ ç”ºå®¶ã‚·ã‚§ã‚¢", area:"kinki", areaName:"è¿‘ç•¿", type:"share", emoji:"â›©ï¸", location:"äº¬éƒ½åºœäº¬éƒ½å¸‚", tags:["ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹","ç”ºå®¶"], lat:35.026, lng:135.745 },
  { id:11, name:"æ·¡è·¯å³¶ ãƒ¯ãƒ¼ã‚±ãƒ¼ã‚·ãƒ§ãƒ³", area:"kinki", areaName:"è¿‘ç•¿", type:"dual", emoji:"ğŸŒº", location:"å…µåº«çœŒæ·¡è·¯å¸‚", tags:["äºŒæ‹ ç‚¹","æµ·ãŒè¦‹ãˆã‚‹"], lat:34.424, lng:134.896 },
  { id:12, name:"å°¾é“ å‚ã®ä¸Šã®ãŠè©¦ã—ä½å®…", area:"chugoku", areaName:"ä¸­å›½", type:"trial", emoji:"ğŸ¨", location:"åºƒå³¶çœŒå°¾é“å¸‚", tags:["ãŠè©¦ã—ç§»ä½","æµ·ãŒè¦‹ãˆã‚‹"], lat:34.408, lng:133.196 },
  { id:13, name:"é«˜çŸ¥å››ä¸‡å è‡ªç„¶æš®ã‚‰ã—ä½“é¨“", area:"shikoku", areaName:"å››å›½", type:"trial", emoji:"ğŸŸ", location:"é«˜çŸ¥çœŒå››ä¸‡åå¸‚", tags:["ãŠè©¦ã—ç§»ä½","è£œåŠ©é‡‘ã‚ã‚Š"], lat:33.014, lng:132.939 },
  { id:14, name:"ç³¸å³¶ æµ·ã¨å±±ã®ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹", area:"kyushu", areaName:"ä¹å·", type:"share", emoji:"ğŸŒ…", location:"ç¦å²¡çœŒç³¸å³¶å¸‚", tags:["ã‚·ã‚§ã‚¢ãƒã‚¦ã‚¹","å­é€£ã‚ŒOK"], lat:33.551, lng:130.197 },
  { id:15, name:"å±‹ä¹…å³¶ æ£®ã®æš®ã‚‰ã—ä½“é¨“", area:"kyushu", areaName:"ä¹å·", type:"trial", emoji:"ğŸŒ¿", location:"é¹¿å…å³¶çœŒå±‹ä¹…å³¶ç”º", tags:["ãŠè©¦ã—ç§»ä½","ä¸–ç•Œéºç”£"], lat:30.337, lng:130.527 },
];

const areaBbox = {
  all:     [128.0,30.0,146.0,45.0],
  hokkaido:[139.0,41.0,146.0,45.5],
  tohoku:  [138.5,37.0,142.0,41.5],
  kanto:   [138.0,34.5,141.0,37.5],
  chubu:   [135.0,33.5,140.0,37.5],
  kinki:   [134.0,33.5,136.5,35.5],
  chugoku: [130.5,33.5,134.5,35.5],
  shikoku: [132.0,32.5,135.0,34.5],
  kyushu:  [128.5,30.0,132.5,34.0],
};

let typeFilter = "all";
let areaFilter = "all";
let query = "";

const typeColors = {
  trial: { bg:"#eef5f0", text:"#3a6b4a", imgBg:"#c8dfc0" },
  dual:  { bg:"#e8f0f8", text:"#4a7ab5", imgBg:"#a8c4dc" },
  share: { bg:"#fef0e6", text:"#e07b39", imgBg:"#f0c8a0" },
};

function updateMap() {
  const bb = areaBbox[areaFilter] || areaBbox.all;
  const src = `https://www.openstreetmap.org/export/embed.html?bbox=${bb[0]}%2C${bb[1]}%2C${bb[2]}%2C${bb[3]}&layer=mapnik`;
  document.getElementById("map-iframe").src = src;
}

function render() {
  const filtered = facilities.filter(f => {
    if (typeFilter !== "all" && f.type !== typeFilter) return false;
    if (areaFilter !== "all" && f.area !== areaFilter) return false;
    if (query && !f.name.includes(query) && !f.location.includes(query)) return false;
    return true;
  });

  document.getElementById("count").textContent = filtered.length;

  const tc_map = typeColors;
  document.getElementById("panel-list").innerHTML = filtered.map(f => {
    const tc = tc_map[f.type];
    return `<div class="pitem">
      <div class="pitem-emoji" style="background:${tc.imgBg}">${f.emoji}</div>
      <div class="pitem-info">
        <div class="pitem-name">${f.name}</div>
        <div class="pitem-loc">ğŸ“ ${f.location}</div>
        <div class="pitem-tags">${f.tags.map(t=>`<span class="ptag">${t}</span>`).join("")}</div>
      </div>
    </div>`;
  }).join("");
}

document.querySelectorAll("[data-type]").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll("[data-type]").forEach(b => b.className="chip");
    btn.classList.add("active-green");
    typeFilter = btn.dataset.type;
    render();
  });
});

document.querySelectorAll("[data-area]").forEach(btn => {
  btn.addEventListener("click", () => {
    document.querySelectorAll("[data-area]").forEach(b => b.className="chip");
    btn.classList.add("active-orange");
    areaFilter = btn.dataset.area;
    updateMap();
    render();
  });
});

document.getElementById("search").addEventListener("input", e => {
  query = e.target.value;
  render();
});

render();
</script>
</body>
</html>
